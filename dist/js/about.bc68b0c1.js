(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"0d06":function(e,t,o){"use strict";var r=o("d3da"),i=o.n(r);i.a},"49e2":function(e,t,o){"use strict";var r=o("5af7"),i=o.n(r);i.a},"5af7":function(e,t,o){},"96be":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"py-5 view"},[o("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.addUser(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-container",{staticClass:"form-container"},[o("h6",{staticClass:"title"},[e._v("Informações Pessoais")]),o("v-layout",[o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-text-field",{attrs:{rules:e.requiredRule,label:"Nome",required:"",box:""},model:{value:e.form.firstName,callback:function(t){e.$set(e.form,"firstName",t)},expression:"form.firstName"}})],1),o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-text-field",{attrs:{rules:e.requiredRule,label:"Sobrenome",required:"",box:""},model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}})],1)],1),o("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:"",box:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),o("v-layout",[o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-text-field",{attrs:{rules:e.passwrodRules,label:"Senha",type:"password",required:"",box:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-text-field",{attrs:{rules:e.passwrodRules,label:"Confirme a senha",type:"password",required:"",box:""},model:{value:e.secondPassword,callback:function(t){e.secondPassword=t},expression:"secondPassword"}})],1)],1),o("v-layout",[o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[o("v-text-field",e._g({attrs:{label:"Data de Nascimento","prepend-icon":"event",readonly:"",required:"",box:""},on:{blur:function(t){e.date=e.parseDate(e.form.birthDate)}},model:{value:e.form.birthDate,callback:function(t){e.$set(e.form,"birthDate",t)},expression:"form.birthDate"}},r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[o("v-date-picker",{attrs:{"no-title":""},on:{input:function(t){e.menu=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-text-field",{attrs:{label:"Telefone",required:"",mask:"(##) #####-####","prepend-icon":"phone",box:""},model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}})],1)],1),o("v-autocomplete",{attrs:{items:e.institutionsNames,label:"Instituições",rules:e.requiredRule,"no-data-text":"Nenhuma instituição encontrada.",box:""},model:{value:e.form.institution,callback:function(t){e.$set(e.form,"institution",t)},expression:"form.institution"}}),o("h6",{staticClass:"title"},[e._v("Endereço")]),o("v-layout",[o("v-flex",{attrs:{xs12:"",md3:""}},[o("v-text-field",{attrs:{label:"CEP",required:"",mask:"#####-###",box:""},model:{value:e.form.cep,callback:function(t){e.$set(e.form,"cep",t)},expression:"form.cep"}})],1)],1),o("v-layout",[o("v-flex",{attrs:{xs12:"",md3:""}},[o("v-autocomplete",{attrs:{items:e.siglas,label:"Estado",rules:e.requiredRule,"no-data-text":"Nenhum estado encontrado.",box:""},model:{value:e.selectedState,callback:function(t){e.selectedState=t},expression:"selectedState"}})],1),o("v-flex",{attrs:{xs12:"",md5:""}},[o("v-autocomplete",{attrs:{items:e.cities,label:"Cidade",rules:e.requiredRule,"no-data-text":"Nenhuma cidade encontrada.",box:""},model:{value:e.selectedCity,callback:function(t){e.selectedCity=t},expression:"selectedCity"}})],1),o("v-flex",{attrs:{xs12:"",md4:""}},[o("v-text-field",{attrs:{label:"Bairro",rules:e.requiredRule,required:"",box:""},model:{value:e.form.neighborhood,callback:function(t){e.$set(e.form,"neighborhood",t)},expression:"form.neighborhood"}})],1)],1),o("v-layout",[o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-text-field",{attrs:{label:"Rua",rules:e.requiredRule,required:"",box:""},model:{value:e.form.street,callback:function(t){e.$set(e.form,"street",t)},expression:"form.street"}})],1),o("v-flex",{attrs:{xs12:"",md2:""}},[o("v-text-field",{attrs:{label:"Número",rules:e.requiredRule,required:"",box:""},model:{value:e.form.streetNumber,callback:function(t){e.$set(e.form,"streetNumber",t)},expression:"form.streetNumber"}})],1),o("v-flex",{attrs:{xs12:"",md4:""}},[o("v-text-field",{attrs:{label:"Complemento",box:""},model:{value:e.form.complement,callback:function(t){e.$set(e.form,"complement",t)},expression:"form.complement"}})],1)],1),o("v-btn",{attrs:{type:"submit",color:"success"}},[e._v("Inscrever-se")])],1)],1)],1)},i=[],n=o("9ab4"),a=o("60a3"),s=o("2fe1"),l=o("2ef0"),c=o("bc3a"),u=o.n(c),d="https://viacep.com.br/ws/",f="https://servicodados.ibge.gov.br/api/v1/localidades/estados";function m(e){return u.a.get(""+d+e+"/json").then(function(e){return e.data})}function p(){return u.a.get(f).then(function(e){return e.data})}function h(e){return u.a.get(f+"/"+e+"/municipios").then(function(e){return e.data}).then(function(e){return e.map(function(e){return e.nome})})}var v="https://shielded-inlet-38206.herokuapp.com/";function b(){return u.a.get(v+"institutions").then(function(e){return e.data.data})}var x=o("06a0"),g=o("d60d"),y=o("4ba9"),w=o("5f1f"),C=function(e){function t(){var t=e.call(this)||this;return t.menu=!1,t.date="",t.secondPassword="",t.institutions=[],t.institutionsNames=[],t.states=[],t.siglas=[],t.cities=[],t.form={firstName:"",lastName:"",email:"",password:"",birthDate:"",phoneNumber:"",institution:"",type:"",cep:"",street:"",streetNumber:"",state:"",city:"",neighborhood:"",complement:""},t.cognito=new l["a"],t.valid=!0,t.selectedState="",t.secondPassword="",t.selectedCity="",t.requiredRule=[function(e){return!!e||"Campo obrigatório"}],t.emailRules=[function(e){return!!e||"E-mail é obrigatório"},function(e){return/.+@.+/.test(e)||"Digite um email válido"}],t.passwrodRules=[function(e){return!!e||"Campo obrigatório"},function(e){return e&&e.length>=6||"A senha deve conter pelo menos 6 caracteres"}],t}return n["c"](t,e),t.prototype.onCepChanged=function(e,t){8===e.length&&this.populateFields()},t.prototype.onDateChanged=function(e,t){this.form.birthDate=this.formatDate(e)},t.prototype.onSelectedStateChanged=function(e,t){var o=this;if(e){this.selectedCity="";var r=this.states.filter(function(t){return t.sigla==e})[0].id;this.showLoader(),h(r).then(function(e){o.cities=e,o.selectedCity=o.form.city,o.hideLoader()})}},t.prototype.onSelectedCityChanged=function(e,t){},t.prototype.created=function(){var e=this;p().then(function(t){e.states=t,e.siglas=t.map(function(e){return e.sigla}).sort()}),b().then(function(t){e.institutions=t,e.institutionsNames=t.map(function(e){return e.nome})})},t.prototype.addUser=function(){return n["a"](this,void 0,void 0,function(){var e=this;return n["d"](this,function(t){return this.$refs.form.validate()&&this.validatePassword()&&(this.showLoader(),this.signUp().then(function(t){t=t.data,t.success?(e.$store.dispatch("setUser",t.data),e.signUpCognito()):(e.hideLoader(),"user_exists"===t.code?e.showErrorNotification("Já existe um usuário com este e-mail."):e.showServerErorNotification())}).catch(function(t){e.hideLoader(),e.showServerErorNotification()})),[2]})})},t.prototype.signUpCognito=function(){var e=this;this.cognito.signUp(this.form.email,this.form.password,{name:this.form.firstName,family_name:this.form.lastName,email:this.form.email,birthdate:this.form.birthDate,phone_number:"+55"+this.form.phoneNumber,"custom:type":"user"}).then(function(t){return n["a"](e,void 0,void 0,function(){return n["d"](this,function(e){return Object(w["g"])(this.form.email),Object(w["c"])(),this.$localStorage.set("userForm",JSON.stringify(this.form)),this.hideLoader(),this.$router.push("cadastro/confirmacao"),[2]})})}).catch(function(t){e.hideLoader(),"UsernameExistsException"===t.code?e.showErrorNotification("Já existe um usuário com este e-mail."):e.showServerErorNotification()})},t.prototype.signUp=function(){return n["a"](this,void 0,void 0,function(){return n["d"](this,function(e){switch(e.label){case 0:return this.form.type="user",[4,Object(x["a"])(this.form)];case 1:return[2,e.sent()]}})})},t.prototype.populateFields=function(){var e=this;this.showLoader(),m(this.form.cep).then(function(t){e.form.street=t.logradouro,e.form.neighborhood=t.bairro,e.selectedState=t.uf,e.form.city=t.localidade,e.hideLoader()})},t.prototype.formatDate=function(e){if(!e)return null;var t=e.split("-"),o=t[0],r=t[1],i=t[2];return i+"/"+r+"/"+o},t.prototype.parseDate=function(e){if(!e)return null;var t=e.split("/"),o=t[0],r=t[1],i=t[2];return i+"-"+o.padStart(2,"0")+"-"+r.padStart(2,"0")},t.prototype.validatePassword=function(){return this.form.password===this.secondPassword||(this.showPasswordMismatchNotification(),!1)},n["b"]([Object(a["d"])("form.cep")],t.prototype,"onCepChanged",null),n["b"]([Object(a["d"])("date")],t.prototype,"onDateChanged",null),n["b"]([Object(a["d"])("selectedState")],t.prototype,"onSelectedStateChanged",null),n["b"]([Object(a["d"])("selectedCity")],t.prototype,"onSelectedCityChanged",null),t=n["b"]([Object(a["a"])({components:{}})],t),t}(Object(s["c"])(g["a"],y["a"])),N=C,k=N,S=(o("0d06"),o("2877")),$=Object(S["a"])(k,r,i,!1,null,null,null);t["default"]=$.exports},d3da:function(e,t,o){},ff73:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"d-flex justify-content-center view confirm-view"},[o("div",{staticClass:"container form-container"},[o("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.confirmUser(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("div",{staticClass:"wrapper"},[o("v-text-field",{attrs:{rules:[function(e){return!!e||"Campo obrigatório"}],label:"Código de verificação",required:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),o("v-btn",{attrs:{type:"submit",color:"primary"}},[e._v("Confirmar")]),o("v-btn",{attrs:{loading:e.loading,disabled:e.loading,color:"success",flat:""},on:{click:e.resendConfirmationCode},scopedSlots:e._u([{key:"loader",fn:function(){return[o("span",[e._v(e._s(e.counter)+" segundos")])]},proxy:!0}])},[e._v("\n          Reenviar código\n          ")])],1)])],1)])},i=[],n=o("9ab4"),a=o("60a3"),s=o("4ba9"),l=o("2fe1"),c=o("d60d"),u=o("5f1f"),d=function(e){function t(){var t=e.call(this)||this;return t.valid=!1,t.loading=!1,t.counter=30,t.email="",t.code="",t}return n["c"](t,e),t.prototype.created=function(){this.email=this.$router.currentRoute.query.email,this.email&&Object(u["g"])(this.email)},t.prototype.confirmUser=function(){var e=this;this.$refs.form.validate()&&(this.showLoader(),Object(u["a"])(this.code).then(function(){e.user=JSON.parse(e.$localStorage.get("userForm")),Object(u["d"])(e.user.email,e.user.password).then(function(t){e.$store.commit("setUserSession",t),e.hideLoader(),e.$router.push("/conta"),e.showSuccessNotification("Inscrição realizada com sucesso.")}).catch(function(t){e.hideLoader(),e.showServerErorNotification()})}).catch(function(t){"CodeMismatchException"===t.code?e.showErrorNotification("PIN inválido ou expirado."):e.showServerErorNotification(),e.hideLoader()}))},t.prototype.resendConfirmationCode=function(){var e=this;Object(u["f"])().then(function(){return e.disableButton()}).catch(function(){e.showServerErorNotification()})},t.prototype.disableButton=function(){var e=this;this.loading=!this.loading;var t=setInterval(function(){return e.counter-=1},1e3);setTimeout(function(){e.loading=!1,e.counter=0,clearInterval(t)},3e4)},t=n["b"]([Object(a["a"])({components:{}})],t),t}(Object(l["c"])(s["a"],c["a"])),f=d,m=f,p=(o("49e2"),o("2877")),h=Object(p["a"])(m,r,i,!1,null,"285c8a26",null);t["default"]=h.exports}}]);
//# sourceMappingURL=about.bc68b0c1.js.map